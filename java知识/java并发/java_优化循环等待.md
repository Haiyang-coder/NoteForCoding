[TOC]
# 优化循环等待----"等待--通知机制"
在破坏占用且等待条件的时候，如果转出账本和转入账本不满足同时在文件架上这个条件，就用死循环的方式来循环等待，核心代码如下
```java
// 一次性申请转出账户和转入账户，直到成功
while(!actr.apply(this, target)) ；
```
更好的方案应该是:如果线程要求的条件不满足，则线程阻塞自己，进入等待状态；当线程要求的条件满足后，通知等待的线程重新执行。其中，使用线程阻塞的方式就能**避免循环等待**消耗 CPU 的问题,即:
>线程首先获取互斥锁，当线程要求的条件不满足时，释放互斥锁，进入等待状态；当要求的条件满足时，通知等待的线程，重新获取互斥锁

## 1. 用synchronized 实现等待 – 通知机制
在 Java 语言里，等待 – 通知机制可以有多种实现方式，比如 Java 语言内置的 synchronized 配合 wait()、notify()、notifyAll() 这三个方法就能轻松实现