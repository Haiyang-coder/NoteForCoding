# epoll

## 1. 两个事件

首先你要明白为什么又epollin和epollout两个事件的提醒？

因为这两个事件原本是阻塞的，会卡在哪里，所以epoll在可以recv和可以write的时候用事件来提醒你，可以读/写了

### 1.1 可读事件

1. LT

告诉你可以读了LT模式应该是最简单的。告诉你缓冲区中又数据可以拿出来了，你就直接拿就行了，你可以一次全拿出来，可以处以分片拿出来，都可以，因为你只要数据没有拿完，下一次的`epoll_wait`会提示你

2. ET

ET模式就有些费力气了，来了数据，他只会和你说一次：有数据来了，至于你拿多少，拿不拿玩他不管了，只通知你一次。所以啊，我们要一次性都拿完，否则下一次`epoll_wait`他也不提示你了。



### 1.2 可写事件

1. LT

这个模式下，可写事件是真的烦人。因为你告诉我可读我很高兴，因为有人给我东西了，我去拿。但是可写事件一直提示我可以写了，关键是我也许不想写。所以一般咋处理呢，我不用你提示我可写，我想写了直接就`send`。一般的写缓冲区挺大的，都可以成功，但是遇到极个别情况发送失败了怎么办？

- 直接我就用阻塞模式发送，绝对能成功：但是你阻塞模式太不优雅了，卡在那里，成何体统
- 我还用非阻塞模式发送，但是发送失败的时候呢，我就不在你这浪费时间了，我把数据留着，让epoll提醒我什么时候能发，等到他能发了，我在用非阻塞模式发送

2. ET

和LT一样，没啥区别的